<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<title>Datenabstraktion</title>
<meta name="author" content="(Johannes Brauer)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/css/theme/simple.css" id="theme"/>

<link rel="stylesheet" href="./mycss/myrevealstyle.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<link rel="stylesheet" type="text/css" href="mycss/mystyle.css" />
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Datenabstraktion</h1><h2 class="author">Johannes Brauer</h2><p class="date">Created: 2018-01-21 Sun 17:31</p>
</section>
<section>
<section id="slide-orgbd682cf">
<h2 id="orgbd682cf">Zusammengesetzte Datenstrukturen</h2>
<ul>
<li>Im Abschnitt über die Verwendung von Hilfsfunktionen wurde der
Begriff der <i>prozeduralen Abstraktion</i> geprägt: Eine Funktion kann
unter Verwendung von Hilfsfunktionen entwickelt werden, ohne die
Details ihrer Implementierung kennen zu müssen. Davon kann
abstrahiert werden.</li>
<li><i>Datenabstraktion</i> ermöglicht mit zusammengesetzten Daten
(Datenstrukturen) zu arbeiten, ohne wissen zu müssen, wie sie aus
primitiveren Datenobjekten konstruiert werden.</li>

</ul>
</section>
<section id="slide-org042068a">
<h3 id="org042068a">Datenabstraktion</h3>
<ul>
<li>Grundgedanke: Einzelne Dinge werden zu einem neuen Ganzen. 
<ul>
<li>Aus 5000 Einzelteilen entsteht ein Auto.</li>
<li>Aus zwei Keksen und Schokocreme entsteht ein Waffelkeks.</li>
<li>Aus zwei Koordinaten entsteht ein Punkt.</li>
<li>Aus einer Menge von Merkmalen entsteht eine Objektstruktur.</li>

</ul></li>

</ul>

</section>
<section id="slide-orgd417915">
<h3 id="orgd417915">Beispiel: Rechnen mit Punkten in der Ebene</h3>
<ul>
<li>In den bisherigen Beispielen wurden nur Funktionen betrachtet, die
atomare Daten (Zahlen) verarbeiten.</li>
<li>Jetzt rechnen wir mit Punkten in der Ebene</li>

</ul>

</section>
<section id="slide-orgfdbc79e">
<h4 id="orgfdbc79e">Defintion von Punkten</h4>
<ul>
<li>Ein Punkt in der Ebene wird durch seine x- und seine y-Koordinate
bestimmt (kartesisches Koordinatensystem).</li>
<li><p>
Wir tun so, als ob wir eine Funktion <code>make-point</code> zur Verfügung
hätten, die einen Punkt erzeugt, z. B. so:
</p>
<pre class="example">
(make-point 3 4)

</pre></li>
<li><p>
Nehmen wir weiter an, es gäbe zwei Funktionen, die die x- bzw. die
y-Koordinate eines Punkts zugänglich macht:
</p>
<pre class="example">
(point-x (make-point 3 4)) ;;=&gt; 3
(point-y (make-point 3 4)) ;;=&gt; 4

</pre></li>

</ul>
</section>
<section id="slide-org9e36f42">
<h4 id="org9e36f42">Punkt-Funktionen</h4>
<ul>
<li><p>
Unter diesen Voraussetzungen könnte eine Funktion zur Addition
zweier Punkte wie folgt definiert werden:
</p>
<div class="org-src-container">

<pre  class="src src-scheme">  <span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">add-point</span>
    <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p1 p2<span style="color: #909183;">]</span>
      <span style="color: #909183;">(</span>make-point
        <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>point-x p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-x p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>point-y p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-y p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>

</ul>
</section>
<section >
<ul>
<li><p>
Weitere <code>point</code>-Funktionen könnten sein:
</p>
<div class="org-src-container">

<pre  class="src src-scheme">  <span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">equal-point?</span>
    <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p1 p2<span style="color: #909183;">]</span>
      <span style="color: #909183;">(</span><span style="color: #0000FF;">and</span> 
       <span style="color: #709870;">(</span>= <span style="color: #907373;">(</span>point-x p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-x p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
       <span style="color: #709870;">(</span>= <span style="color: #907373;">(</span>point-y p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-y p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
  
  <span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">distance-to-0</span>
    <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p<span style="color: #909183;">]</span>
      <span style="color: #909183;">(</span>sqrt
       <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>sqr <span style="color: #6276BA;">(</span>point-x p<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span>
          <span style="color: #907373;">(</span>sqr <span style="color: #6276BA;">(</span>point-y p<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div></li>
<li>Diese (und weitere) Funktionen können programmiert werden, ohne
<ul>
<li>die Funktionen <code>make-point</code>, <code>point-x</code> und <code>point-y</code> implementiert
zu haben und</li>
<li>eine konkrete Repräsentation von Punkten angegeben zu haben.</li>

</ul></li>

</ul>
</section>
<section id="slide-org0d063ea">
<h4 id="org0d063ea">Implementierung der Datenstruktur durch <code>pairs</code></h4>
<p>
<b>Anmerkung:</b> Die hier gezeigte Implementierung funktioniert nicht in
den Lehrsprachen von DrRacket.
</p>

<ul>
<li>Racket stellt eine einfache, aus zwei Komponenten bestehende
Verbundstruktur &#x2013; genannt <code>pair</code> &#x2013; zur Vefügung.</li>
<li>Ein <code>pair</code> kann mithilfe der Funktion <code>cons</code> erzeugt werden.</li>
<li><code>cons</code> erwartet zwei Argumente und gibt ein zusammengesetztes
Datenobjekt zurück, das die beiden Argumente als Teile enthält.
Beispiel: <code>(cons 3 4)</code> liefert <code>(3 . 4)</code></li>
<li><p>
Für den Zugriff auf die beiden Teile eines <code>pairs</code> gibt es die
beiden Funktionen <code>car</code> und <code>cdr</code>:
</p>
<pre class="example">
(car (cons 1 2)) ;;=&gt; 1
(cdr (cons 1 2)) ;;=&gt; 2

</pre></li>

</ul>
</section>
<section id="slide-orgf0dec8e">
<h4 id="orgf0dec8e">Die Funktionen <code>make-point</code>, <code>point-x</code> und <code>point-y</code></h4>
<ul>
<li><code>make-point</code> heißt auch Konstruktionsfunktion.</li>
<li><code>point-x</code> und <code>point-y</code> nennt man auch Selektionsfunktionen.</li>

</ul>
<div class="org-src-container">

<pre  class="src src-scheme"> <span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">make-point</span>
   <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>x y<span style="color: #909183;">]</span> <span style="color: #909183;">(</span>cons x y<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>

 <span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">point-x</span>
   <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p<span style="color: #909183;">]</span> <span style="color: #909183;">(</span>car p<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>

 <span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">point-y</span>
   <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p<span style="color: #909183;">]</span> <span style="color: #909183;">(</span>cdr p<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>
</section>
<section id="slide-org3372ed3">
<h4 id="org3372ed3">Abstraktionsbarrieren</h4>

<div class="figure">
<p><img src="./Abbildungen/barrieren.png" alt="barrieren.png" width="400px" />
</p>
</div>
</section>
<section id="slide-org322d127">
<h4 id="org322d127">Nutzen der Abstraktion</h4>
<ul>
<li>Programm leichter pflegbar</li>
<li>Komplexe Datenstrukturen können auf verschieden Arten unter
Verwendung der von der Programmiersprache bereitgestellten
primitiven Strukturen implementiert werden.</li>
<li>Die Implementierung mithilfe von <code>pairs</code> erfordert allerdings für
jede neu zu definierende Datenstruktur die erneute Implementierung
von Konstruktions- und Selektionsfunktionen. („boiler plate code”)</li>
<li>Deshalb sehen Programmiersprache häufig komfortablere Möglichkeiten
vor, Datenstrukturen zu definieren.</li>

</ul>

</section>
<section id="slide-orgd1a29d9">
<h3 id="orgd1a29d9">Definition von Strukturen in Racket</h3>
<ul>
<li>Sprache: DrRacket-Lehrsprache „Zwischenstufe mit lambda”</li>
<li>Für die Definition von Strukturen (Verbünde, records) steht die
Pseudofunktion <code>define-struct</code> zur Verfügung.</li>
<li><p>
Punkte im zweidimensionalen, kartesischen Koordinatensystem (s. o.)
könnten wie folgt definiert werden:
</p>
<pre class="example">
(define-struct point [x y])

</pre></li>
<li>Mit dieser Definition stehen automatisch die folgenden Funktionen
bereit:</li>

</ul>
</section>
<section >
<ul>
<li><code>make-point</code> : akzeptiert zwei Zahlen als Argumente und erzeugt
ein neues Exemplar der Struktur <code>point</code>.</li>
<li><code>point-x</code> : akzeptiert ein Exemplar der Struktur <code>point</code> und
liefert die <code>x</code>-Komponente.</li>
<li><code>point-y</code> : akzeptiert ein Exemplar der Struktur <code>point</code> und
liefert die <code>y</code>-Komponente.</li>
<li><code>point?</code> : akzeptiert einen beliebigen Wert als Argument und
liefert <code>#true</code>, falls der Wert ein Exemplar der Struktur <code>point</code>
ist.</li>

</ul>
</section>
<section id="slide-org9d2360d">
<h4 id="org9d2360d">Benutzungsbeispiel in DrRacket</h4>
<pre class="example">
Willkommen bei DrRacket, Version 6.7 [3m].
Sprache: Zwischenstufe mit lambda; memory limit: 128 MB.
&gt; (define-struct point [x y])
&gt; (define p1 (make-point 3 4))
&gt; p1
(make-point 3 4)
&gt; (point-x p1)
3
&gt; (point-y p1)
4
&gt; (point? p1)
#true
&gt; (point? "p1")
#false
&gt; 
</pre>
</section>
<section id="slide-orge6409a1">
<h4 id="orge6409a1">Weiterverwendung von <code>add-point</code> &#x2026;</h4>
<p>
Die in Abschnitt <a href="#/slide-org9e36f42">Punkt-Funktionen</a> eingeführten Funktionen
</p>

<div class="org-src-container">

<pre  class="src src-scheme">  <span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">add-point</span>
    <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p1 p2<span style="color: #909183;">]</span>
      <span style="color: #909183;">(</span>make-point
        <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>point-x p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-x p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>point-y p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-y p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
  <span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">equal-point?</span>
    <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p1 p2<span style="color: #909183;">]</span>
      <span style="color: #909183;">(</span><span style="color: #0000FF;">and</span> 
       <span style="color: #709870;">(</span>= <span style="color: #907373;">(</span>point-x p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-x p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
       <span style="color: #709870;">(</span>= <span style="color: #907373;">(</span>point-y p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-y p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
  <span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">distance-to-0</span>
    <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p<span style="color: #909183;">]</span>
      <span style="color: #909183;">(</span>sqrt
       <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>sqr <span style="color: #6276BA;">(</span>point-x p<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span>
          <span style="color: #907373;">(</span>sqr <span style="color: #6276BA;">(</span>point-y p<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>
<p>
können unverändert bleiben.
</p>
</section>
<section id="slide-org80e5f31">
<h4 id="org80e5f31">Regel (7) für das Aufschreiben von Strukturdefinitionen</h4>
<ul>
<li>Für den Entwurf einer zusammengesetzten Datenstruktur ist es
hilfreich, ihre Zusammensetzung durch einen Kommentar genau zu beschreiben.</li>
<li>Anschließend erfolgt der passende Aufruf von <code>define-struct</code></li>
<li><p>
Beispiel:
</p>
<pre class="example">
;; Ein Rechteck ist ein Wert
;;  (make-rectangle a b)
;; wobei a und b Zahlen sind, die die Seitenlängen eines Rechecks
;; beschreiben.
(define-struct rectangle [a b])

</pre></li>

</ul>
</section>
<section >
<p>
<b>Regel 7 (Datenstrukturen)</b>
</p>
<ol>
<li>Finde durch die Datenanalyse heraus, aus welchen Komponenten die
Datenstruktur besteht.</li>
<li>Schreibe dann die Datendefinition in der Form auf:<br />
; Ein \(s\) ist ein Wert<br />
; (make-s <i>s<sub>1</sub></i> &#x2026; <i>s<sub>n</sub></i>)<br />
; wobei <i>s<sub>1</sub></i> &#x2026;</li>
<li>Definiere die Datenstruktur:<br />
(define-struct \(s\) [\(s_1\) &#x2026;])</li>

</ol>
</section>
<section id="slide-orge5f0f1f">
<h3 id="orge5f0f1f">Entwicklungsmethodik für strukturverarbeitende Funktionen</h3>
<p>
<b>Regel 8 (strukturverarbeitende Funktionen)</b>
</p>

<ol>
<li>Bestimme die für die Berechnung des Ergebnisses
erforderlichen Komponenten der Datenstruktur!</li>
<li>Für jede Komponente der Datenstruktur, von deren Wert das Ergebnis
der Funktion abhängt, schreibe den zugehörigen Selektor in die
Funktionsschablone.</li>
<li>Falls die Funktion eine Datenstruktur als Resultat liefern muss,
nimm den Aufruf des Konstruktors in die Schablone mit auf.</li>

</ol>

</section>
<section id="slide-org29fdf78">
<h4 id="org29fdf78">Anwendungsbeispiele für Regel 8</h4>
<p>
Für die Funktion <code>add-point</code> ergäbe sich damit die folgenden Schablone:
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">add-point</span>
      <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p1 p2<span style="color: #909183;">]</span>
         <span style="color: #909183;">(</span>make-point
            <span style="color: #709870;">(</span>... <span style="color: #907373;">(</span>point-x p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-x p2<span style="color: #907373;">)</span>...
             ... <span style="color: #907373;">(</span>point-y p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-y p2<span style="color: #907373;">)</span>...<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</div>

<p>
Für die Funktion <code>equal-point?</code> ergäbe sich eine Schablone ohne Konstruktor:
</p>
<div class="org-src-container">

<pre  class="src src-scheme"><span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">equal-point?</span>
      <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p1 p2<span style="color: #909183;">]</span>
         <span style="color: #909183;">(</span>...
            <span style="color: #709870;">(</span>... <span style="color: #907373;">(</span>point-x p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-x p2<span style="color: #907373;">)</span>...
             ... <span style="color: #907373;">(</span>point-y p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-y p2<span style="color: #907373;">)</span>...<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</section>
<section id="slide-orgd7827ca">
<h4 id="orgd7827ca">Regel-konforme Aufschreibung der Funktionen <code>equal-point?</code> und <code>add-point</code></h4>
<div class="outline-text-4" id="text-orgd7827ca">
</div>
</section>
<section id="slide-orge7ae6ec">
<h5 id="orge7ae6ec"><code>equal-point?</code></h5>
<div class="org-src-container">

<pre  class="src src-scheme"><span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">ein Punkt ist ein Wert</span>
<span style="color: #8D8D84;">;;   </span><span style="color: #8D8D84; font-style: italic;">(make-point x y)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">wobei x und y Zahlen sind und die kartesischen Koordinaten</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">eines Punkts in der Ebene darstellen.</span>
<span style="color: #707183;">(</span>define-struct point <span style="color: #7388D6;">[</span>x y<span style="color: #7388D6;">]</span><span style="color: #707183;">)</span>

<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">pr&#252;ft zwei Punkte auf Gleichheit, die durch die Gleichheit</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">der x- und der y-Koordinaten gegeben ist.</span>
<span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">equal-point?</span>
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p1 p2<span style="color: #909183;">]</span>
    <span style="color: #909183;">(</span><span style="color: #0000FF;">and</span> 
     <span style="color: #709870;">(</span>= <span style="color: #907373;">(</span>point-x p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-x p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
     <span style="color: #709870;">(</span>= <span style="color: #907373;">(</span>point-y p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-y p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Beispielanwendungen:</span>
<span style="color: #707183;">(</span>not <span style="color: #7388D6;">(</span>equal-point? <span style="color: #909183;">(</span>make-point 2 3<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>make-point 5 1<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>equal-point? <span style="color: #7388D6;">(</span>make-point 2 3<span style="color: #7388D6;">)</span> <span style="color: #7388D6;">(</span>make-point 2 3<span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>
</section>
<section id="slide-org9aef096">
<h5 id="org9aef096"><code>add-point</code></h5>
<div class="org-src-container">

<pre  class="src src-scheme"><span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Berechnung eines neuen Punktes durch die Addition zweier Punkte</span>
<span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">add-point</span>
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p1 p2<span style="color: #909183;">]</span>
    <span style="color: #909183;">(</span>make-point
     <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>point-x p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-x p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
     <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>point-y p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-y p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Beispielanwendungen:</span>
<span style="color: #707183;">(</span>equal-point? <span style="color: #7388D6;">(</span>add-point <span style="color: #909183;">(</span>make-point 2 3<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>make-point 5 1<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">(</span>make-point 7 4<span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>
</section>
</section>
<section>
<section id="slide-org22b50aa">
<h2 id="org22b50aa">Formulierung von Tests</h2>
<div class="outline-text-2" id="text-org22b50aa">
</div>
</section>
<section id="slide-orge8b84ed">
<h3 id="orge8b84ed">Tests statt Beispielanwendungen</h3>
<ul>
<li>Man beachte, dass Formulierung der Beispielanwendungen für die
Funktion <code>add-point</code> die Existenz der Funktion <code>equal-point?</code> voraussetzt.</li>
<li>Ohne diese Funktion wäre das Aufschreiben der Beispielanwendungen
erheblich umständlicher.</li>
<li>Die Pseudofunktion <code>define-struct</code> erzeugt leider kein
Gleichheisprädikat automatisch.</li>
<li>Racket bietet aber die Möglichkeit Testprozeduren anstelle von
Beispielanwendungen zu benutzen.</li>

</ul>
</section>
<section id="slide-orgc309c64">
<h3 id="orgc309c64">Die Funktion <code>add-point</code> mit Tests</h3>
<ul>
<li>Statt des selbst definierten Gleichheitsprädikats <code>equal-point?</code>
verwenden wir für den Test die Standard-Testprozedur <code>check-expect</code>.</li>
<li><code>check-expect</code> erwartet zwei Argumente:
<ol>
<li>den zu testenden Ausdruck</li>
<li>den Erwartungswert</li>

</ol></li>

</ul>
<div class="org-src-container">

<pre  class="src src-scheme"><span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">ein Punkt ist ein Wert</span>
<span style="color: #8D8D84;">;;   </span><span style="color: #8D8D84; font-style: italic;">(make-point x y)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">wobei x und y Zahlen sind und die kartesischen Koordinaten</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">eines Punkts in der Ebene darstellen.</span>
<span style="color: #707183;">(</span>define-struct point <span style="color: #7388D6;">[</span>x y<span style="color: #7388D6;">]</span><span style="color: #707183;">)</span>

<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Berechnung eines neuen Punktes durch die Addition zweier Punkte</span>
<span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">add-point</span>
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p1 p2<span style="color: #909183;">]</span>
    <span style="color: #909183;">(</span>make-point
     <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>point-x p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-x p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span>
     <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>point-y p1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>point-y p2<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Tests:</span>
<span style="color: #707183;">(</span>check-expect <span style="color: #7388D6;">(</span>add-point <span style="color: #909183;">(</span>make-point 2 3<span style="color: #909183;">)</span> <span style="color: #909183;">(</span>make-point 5 1<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">(</span>make-point 7 4<span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>
</section>
<section >
<ul>
<li>Betätigt man nun den Start-Knopf von DrRacket, erscheint im
Interaktionsfenster:</li>

</ul>
<pre class="example">
Willkommen bei DrRacket, Version 6.7 [3m].
Sprache: Zwischenstufe mit lambda; memory limit: 128 MB.
Der eine Test ist bestanden!
&gt; 
</pre>
</section>
<section id="slide-org223b8bc">
<h3 id="org223b8bc">Testfälle in Racket</h3>
<dl>
<dt>(check-expect expr expr)</dt><dd>Dieser Testfall überprüft, ob der erste
expr den gleichen Wert hat wie der zweite expr, wobei das zweite
expr meist ein Literal ist.</dd>
<dt>(check-within expr expr expr)</dt><dd>Wie
check-expect, aber mit einem weiteren Ausdruck, der als Wert eine
Zahl delta hat. Dieser Testfall überprüft, dass jede Zahl im Resultat
des ersten expr maximal um delta von der entsprechenden Zahl im
zweiten expr abweicht.</dd>
<dt>(check-member-of expr expr &#x2026;)</dt><dd>Ähnlich wie
check-expect: Der Testfall überprüft, dass das Resultat des ersten
Operanden gleich dem Wert eines der folgenden Operanden ist.</dd>

</dl>
</section>
<section >
<dl>
<dt>(check-range expr expr expr)</dt><dd>Ähnlich wie check-expect: Alle drei
Operanden müssen Zahlen sein. Der Testfall überprüft, ob die erste
Zahl zwischen der zweiten und der dritten liegt (inklusive).</dd>
<dt>(check-error expr expr)</dt><dd>Dieser Testfall überprüft, ob der erste expr
einen Fehler produziert, wobei die Fehlermeldung der Zeichenkette
entspricht, die der Wert des zweiten expr ist.</dd>

</dl>

</section>
<section id="slide-orgbb22674">
<h3 id="orgbb22674">Modifikation der Regel 3</h3>
<p>
<b>Regel 3neu</b>
</p>

<p>
Schreibe Tests für die Funktion unter Verwendung der
<code>check-...</code>-Prozeduren von Racket auf.
</p>

<p>
Es ist üblich, die Tests zwischen die Zweckbestimmung und die Funktion
zu schreiben.
</p>

</section>
<section id="slide-orgea3f12a">
<h4 id="orgea3f12a">Anwendung auf die Funktion <code>distance-to-0</code></h4>
<div class="org-src-container">

<pre  class="src src-scheme"><span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">ein Punkt ist ein Wert</span>
<span style="color: #8D8D84;">;;   </span><span style="color: #8D8D84; font-style: italic;">(make-point x y)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">wobei x und y Zahlen sind und die kartesischen Koordinaten</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">eines Punkts in der Ebene darstellen.</span>
<span style="color: #707183;">(</span>define-struct point <span style="color: #7388D6;">[</span>x y<span style="color: #7388D6;">]</span><span style="color: #707183;">)</span>

<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">berechnet den Abstand eines Punktes vom Ursprung des</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Koordinatensystems</span>
<span style="color: #707183;">(</span>check-within <span style="color: #7388D6;">(</span>distance-to-0 <span style="color: #909183;">(</span>make-point 2 2<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">(</span>sqrt 8<span style="color: #7388D6;">)</span> 0.01<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>check-within <span style="color: #7388D6;">(</span>distance-to-0 <span style="color: #909183;">(</span>make-point <span style="color: #709870;">(</span>sqrt 8<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>sqrt 8<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span> 4 0.01<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">distance-to-0</span>
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>p<span style="color: #909183;">]</span>
    <span style="color: #909183;">(</span>sqrt
     <span style="color: #709870;">(</span>+ <span style="color: #907373;">(</span>sqr <span style="color: #6276BA;">(</span>point-x p<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span>
        <span style="color: #907373;">(</span>sqr <span style="color: #6276BA;">(</span>point-y p<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>
<p>
<b>Frage:</b> Warum brauchen wir hier die Testprozedur <code>check-within</code>?
</p>

<p>
(Aufgaben zu Datenstrukturen)
</p>

</section>
</section>
<section>
<section id="slide-orgc573616">
<h2 id="orgc573616">Gemischte Daten</h2>
<div class="outline-text-2" id="text-orgc573616">
</div>
</section>
<section id="slide-org1d6a3fc">
<h3 id="org1d6a3fc">Datenabstraktion durch Generalisierung</h3>
<ul>
<li>Funktionen sollen verschiedene &#x2013; aber verwandte &#x2013; Datenstrukturen
verarbeiten.</li>

<li>Beispiel: Rechtecke und Kreise sind geometrische Figuren.</li>

</ul>

<pre class="example">
    ;; Eine Figur ist entweder
    ;; - ein Rechteck oder
    ;; - ein Kreis
    ;; Name: shape
</pre>

<ul>
<li>Für <code>shapes</code>-verarbeitende Funktionen sind nur die
Datenstrukturdefinitionen für Rechtecke und Kreise erforderlich.</li>

</ul>

</section>
<section id="slide-org196c3e1">
<h3 id="org196c3e1">Definition von <code>rectangle</code></h3>
<div class="org-src-container">

<pre  class="src src-scheme"><span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Eine Rechteck ist ein Wert </span>
<span style="color: #8D8D84;">;;   </span><span style="color: #8D8D84; font-style: italic;">(make-rectangle h w)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">wobei h eine Zahl f&#252;r die H&#246;he, </span>
<span style="color: #8D8D84;">;;       </span><span style="color: #8D8D84; font-style: italic;">w eine Zahl f&#252;r die Breite</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">des Rechtecks ist</span>
<span style="color: #707183;">(</span>define-struct rectangle <span style="color: #7388D6;">[</span>h w<span style="color: #7388D6;">]</span><span style="color: #707183;">)</span>

<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Rechteckfl&#228;che berechnen</span>
<span style="color: #707183;">(</span>check-within <span style="color: #7388D6;">(</span>rect-area <span style="color: #909183;">(</span>make-rectangle 2.5 3.0<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span> 7.5 0.01<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">rect-area</span>
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>r<span style="color: #909183;">]</span>
    <span style="color: #909183;">(</span>* <span style="color: #709870;">(</span>rectangle-h r<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>rectangle-w r<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</section>
<section id="slide-orgdc774f4">
<h3 id="orgdc774f4">Definition von <code>circle</code></h3>
<div class="org-src-container">

<pre  class="src src-scheme"><span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Ein Kreis ist ein Wert</span>
<span style="color: #8D8D84;">;;    </span><span style="color: #8D8D84; font-style: italic;">(make-cicle r)</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">wobei r eine Zahl f&#252;r den Radius ist.</span>
<span style="color: #707183;">(</span>define-struct circle <span style="color: #7388D6;">[</span>r<span style="color: #7388D6;">]</span><span style="color: #707183;">)</span>

<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Kreisfl&#228;che berechnen</span>
<span style="color: #707183;">(</span>check-within <span style="color: #7388D6;">(</span>circle-area <span style="color: #909183;">(</span>make-circle 1.0<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span> pi 0.01<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">circle-area</span>
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>r<span style="color: #909183;">]</span>
    <span style="color: #909183;">(</span>* <span style="color: #709870;">(</span>circle-r r<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>circle-r r<span style="color: #709870;">)</span> pi<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</section>
<section id="slide-org9896d77">
<h3 id="org9896d77">Flächeninhalt von Figuren</h3>
<div class="org-src-container">

<pre  class="src src-scheme"><span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Eine Figur ist entweder</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">- ein Rechteck oder</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">- ein Kreis</span>
<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Name: shape</span>

<span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Fl&#228;cheninhalt einer Figur berechnen</span>
<span style="color: #707183;">(</span>check-within <span style="color: #7388D6;">(</span>shape-area <span style="color: #909183;">(</span>make-circle 1.0<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span> pi 0.01<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span>check-within <span style="color: #7388D6;">(</span>shape-area <span style="color: #909183;">(</span>make-rectangle 2.5 3.0<span style="color: #909183;">)</span><span style="color: #7388D6;">)</span> 7.5 0.01<span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">shape-area</span>
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">lambda</span> <span style="color: #909183;">[</span>s<span style="color: #909183;">]</span>
    <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span>
      <span style="color: #709870;">[</span><span style="color: #907373;">(</span>circle? s<span style="color: #907373;">)</span>    <span style="color: #907373;">(</span>circle-area s<span style="color: #907373;">)</span><span style="color: #709870;">]</span>
      <span style="color: #709870;">[</span><span style="color: #907373;">(</span>rectangle? s<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>rect-area s<span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span></pre>
</pre>
</div>

</section>
<section id="slide-orgaf787bd">
<h3 id="orgaf787bd">Entwurfsmethodik für Funktionen zur Verarbeitung gemischter Daten</h3>
<p>
<b>Regel 9 (Funktionen für gemischte Daten)</b>  
</p>

<ol>
<li>Wenn sich bei der Datenanalyse herausstellt, dass
gemischte Daten zu verarbeiten sind, schreibe zunächst eine
Datendefinition in der Form auf:<br />
;; Ein \(s\) ist entweder<br />
;; - ein \(t_1\) oder<br />
;; - \(\ldots\) oder<br />
;; - ein \(t_n\) <br />
;; Name: x</li>
<li>Für eine \(s\) -verarbeitende Funktion ist mindestens je ein Testfall
für jede Variante von \(s\) aufzuschreiben.</li>

</ol>
</section>
<section >
<ol>
<li value="3"><p>
Seien <code>t1?</code>, <code>t2?</code>, &#x2026;, <code>tn?</code> die Prädikate zu den in \(s\)
vorkommenden Varianten \(t_1, t_2, \ldots, t_n\). Dann ergibt
sich für eine \(s\) -verarbeitende Funktion die folgende Funktionsschablone:
</p>
<pre class="example">
    (check-... )
    ...
    (check-... )
    (define f
      (lambda [x]
        (cond
           [(t1? x) ...]
           [(t2? x) ...]
           ...
           [(tn? x) ...])))
</pre></li>

</ol>
<p>
(Aufgaben zu gemischten Daten)
</p>
</section>
</section>
<section>
<section id="slide-orgd98dcef">
<h2 id="orgd98dcef">Exkurs: Algebraische Datentypen</h2>
<div class="outline-text-2" id="text-orgd98dcef">
</div>
</section>
<section id="slide-org8ad8a8e">
<h3 id="org8ad8a8e">Produkttypen</h3>
<ul>
<li>Die in Kapitel <a href="#/slide-orgd1a29d9">Definition von Strukturen in Racket</a> erläuterten Strukturdefinitionen
nennt man oft auch <i>Produkte</i>.</li>
<li>Die Menge aller Exemplare der Strukturdefinition <code>point</code>
kann man als Teilmenge des kartesischen Produkts 
\[number \times number\]
angesehen werden.</li>
<li>Daher die Bezeichnung <i>Produkttypen</i>.</li>

</ul>
</section>
<section id="slide-orgfebaf05">
<h3 id="orgfebaf05">Summentypen</h3>
<ul>
<li><p>
Die in Kapitel <a href="#/slide-orgc573616">Gemischte Daten</a> eingeführten varianten Typen
</p>
<blockquote nil>
<p>
Eine Figur ist entweder ein Rechteck oder ein Kreis.
</p>
</blockquote>
<p>
werden auch als Summentypen bezeichnet.
</p></li>
<li>Die Menge aller Figuren ist die Vereinigung der Menge aller Kreise
mit der Menge aller Rechtecke.</li>
<li>Die <i>Vereinigung von Mengen</i> wird auch als die <i>Summe der Mengen</i>
bezeichnet.</li>
<li>Daher die Bezeichnung Summentypen.</li>

</ul>

</section>
<section id="slide-org9784d21">
<h3 id="org9784d21">Haskell</h3>
<p>
Der Begriff der algebraischen Datentypen ist inbesondere im Kontext
der Programmiersprache <a href="https://www.haskell.org">Haskell</a> sehr gebräuchlich.
</p>
</section>
</section>
</div>
</div>
<script src="./reveal.js/lib/js/head.min.js"></script>
<script src="./reveal.js/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
overview: true,
margin: 0.05,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'slide', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: './reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: './reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
,dependencies: [ { src: 'plugin/menu/menu.js', async: true }, { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true } ]});
</script>
</body>
</html>
